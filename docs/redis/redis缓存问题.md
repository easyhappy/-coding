---
title: 2022年Redis最新面试题 - Redis淘汰策略
author: 漫步coding
date: '2022-4-12'
---


### 缓存问题
 
- 本地缓存
- 分布式缓存
- Redis缓存雪崩
- Redis缓存击穿
- Redis缓存' 穿透
- 缓存预热
- 缓存降级
- 热点数据和冷数据


#### Redis缓存雪崩


出现概率: ★★★★★


这个在Redis面试的题目中算是出镜率特别高的问题了, 建议仔细消化一下。

![](https://images.xiaozhuanlan.com/uploads/photo/2022/484cab7c-e4bb-476d-889e-b68c0f60124d.png)


1)、缓存雪崩是指大量的应用请求无法在Redis缓存中进行处理，紧接着，短时间大量请求直接打到数据库层，导致数据库层的压力激增, 可能瞬间就会导致数据库宕机。


缓存雪崩一般是由两个原因导致的，应对方案也有所不同，我们一个个来看。

第一个原因是：缓存中有大量数据同时过期，比如说一些APP首页缓存数据，都设置了当天有效， 凌晨过期， 在第二天流量高峰时, 大量用户访问的请求， 没有换成从数据库中读取数据。如果应用的并发请求量很大，那么数据库的压力也突然变得很大，可能会造成缓存雪崩。

这种类似的问题解决思路也基本简单, 打散过期时间, 比如设置过期时间为 24小时之后 + 随机N分钟。

另外一个原因是Redis宕机, 这个就需要分析Redis宕机的原因了， 是因为磁盘满了还是内存满了, 根据情况进行处理，或者升配置什么的。
如果是内存满了, 也需要考虑是不是缓存过期回收策略的问题。


![](https://images.xiaozhuanlan.com/uploads/photo/2022/eed166b8-45d3-4cec-8add-fc1c6102ef1a.png)

#### Redis缓存击穿/缓存穿透

出现概率: ★★★★★

缓存穿透是指用户查询数据，在数据库没有，自然在缓存中也不会有。这样就导致用户查询的时候，在缓存中找不到，每次都要去数据库再查询一遍，然后返回空（相当于进行了两次无用的查询）。这样请求就绕过缓存直接查数据库，这也是经常提的缓存命中率问题。

 缓存穿透解决方案：

 - 采用布隆过滤器，将所有可能存在的数据哈希到一个足够大的bitmap中，一个一定不存在的数据会被这个bitmap拦截掉，从而避免了对底层存储系统的查询压力。
- 如果一个查询返回的数据为空（不管是数据不存在，还是系统故障），我们仍然把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。通过这个直接设置的默认值存放到缓存，这样第二次到缓存中获取就有值了，而不会继续访问数据库，这种办法最简单粗暴！

